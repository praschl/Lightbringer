@model ListServicesViewModel
@{
    ViewData["Title"] = "Subscribe services";
}

<br />

<div class="row">
    <div class="col-8">
        <h2>Search and subscribe services</h2>
    </div>
    <div class="col-4">
        <form method="get" asp-action="ListServices">
            <input hidden asp-for="ServiceHostId" />

            <div class="input-group mb-3">
                <input asp-for="Filter" placeholder="Filter (contains search)" class="form-control" />
                <div class="input-group-append">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>

        </form>
    </div>
</div>

@if (Model.Daemons != null && Model.Daemons.Any())
{
    <div class="row">
        @{ var id = 1;}
        @foreach (var item in Model.Daemons)
        {
            var checkedDisplay = item.Checked ? null : "display:none;";
            var uncheckedDisplay = (item.Checked ? "display:none;" : null) + " opacity: 0.3";
            var descriptionId = "description-" + id;

            <div class="col-4 mb-4">
                <div class="card">
                    <div class="card-header">
                        <div class="row">
                            <div class="col-2 lead">
                                <i class="fas fa-cogs text-primary" title="@item.Dto.ServiceType"></i>
                                <partial name="_ServiceStatePartial" model="@item.Dto.State" />
                            </div>
                            <div class="col-8">
                                @item.Dto.DisplayName
                            </div>
                            <div class="col-2 text-right">
                                <button id="remove-@item.Dto.ServiceName"
                                        class="btn btn-sm btn-primary"
                                        style="@checkedDisplay;"
                                        onclick="overview.toggle('@item.Dto.ServiceName');">
                                    <i class="fas fa-check fa-fw"></i>
                                </button>
                                <button id="add-@item.Dto.ServiceName"
                                        class="btn btn-sm btn-primary"
                                        style="@uncheckedDisplay;"
                                        onclick="overview.toggle('@item.Dto.ServiceName');">
                                    <i class="fas fa-fw"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card-body" title="@item.Dto.ServiceName">
                        <a data-toggle="collapse" href="#@(descriptionId)" role="button" aria-expanded="false" aria-controls="@(descriptionId)">@item.Dto.DisplayName</a>
                        <div class="collapse" id="@(descriptionId)">
                            @item.Dto.Description
                        </div>
                    </div>
                </div>
            </div>
            
            id++;
        }
    </div>


    @*<table class="table table-striped table-borderless">
        <thead>
            <tr class="table-primary">
                <th style="width: 1%;"></th>
                <th style="width: 1%;"></th>
                <th>Name</th>
                <th>Service Name</th>
                <th style="width: 1%;"></th>
            </tr>
        </thead>
        <tbody>

            @foreach (var item in Model.Daemons)
            {
                var checkedDisplay = item.Checked ? null : "display:none;";
                var uncheckedDisplay = (item.Checked ? "display:none;" : null) + " opacity: 0.3";

                <tr>
                    <td style="vertical-align: middle">
                        <i class="fas fa-cogs text-primary" title="@item.Dto.ServiceType"></i>
                    </td>
                    <td style="vertical-align: middle">
                        <partial name="_ServiceStatePartial" model="@item.Dto.State" />
                    </td>
                    <td style="vertical-align: middle">
                        @item.Dto.DisplayName
                    </td>
                    <td style="vertical-align: middle">
                        @item.Dto.ServiceName
                    </td>
                    <td>
                        <button id="remove-@item.Dto.ServiceName"
                                class="btn btn-sm btn-primary"
                                style="@checkedDisplay;"
                                onclick="overview.toggle('@item.Dto.ServiceName');">
                            <i class="fas fa-check fa-fw"></i>
                        </button>
                        <button id="add-@item.Dto.ServiceName"
                                class="btn btn-sm btn-primary"
                                style="@uncheckedDisplay;"
                                onclick="overview.toggle('@item.Dto.ServiceName');">
                            <i class="fas fa-fw"></i>
                        </button>
                    </td>

                </tr>
            }
        </tbody>
    </table>*@
}
@section Scripts {
    <script type="text/javascript" src="~/js/OverviewHandler.js"></script>
    <script type="text/javascript">
        var overview = new OverviewHandler(@Model.ServiceHostId);
    </script>
}